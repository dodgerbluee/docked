name: CI - Push to Main

on:
  push:
    branches: [main, master]

env:
  NODE_VERSION: '18'

jobs:
  # Run tests with coverage
  test:
    uses: ./.github/workflows/reusable/run-tests.yml
    with:
      node-version: ${{ env.NODE_VERSION }}
      run-coverage: true
      upload-coverage: true

  # Run linting
  lint:
    uses: ./.github/workflows/reusable/run-linting.yml
    with:
      node-version: ${{ env.NODE_VERSION }}
      check-formatting: true

  # Security scan runs automatically via security.yml workflow
  # No need to call it here as it triggers on push to main

